<html>
<!-- BOOTSRAP - Styling -->
<meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <!-- more styling -->
  <style>
    div {
      margin: 10px;
    }
    form {
      border: 1px solid lightgrey;
      padding: 10px;
    }
  </style>
  <script>
    window.onload = (event) =>{
      
      var sendButton = document.getElementById("myButton");
      sendButton.addEventListener("click", function(){
        
        var name = document.getElementById("name").value;
        var country = document.getElementById("country").value;
        var message = document.getElementById("message").value;

        console.log(name);
        // We create AJAX object which is waiting response
        var xmlhttp = new XMLHttpRequest();
        xmlhttp.onreadystatechange = function(){
          if(this.readyState == 4 && this.status == 200){
            // Response data will be shown in status field
            document.getElementById("status").innerHTML = this.responseText;
            console.log(this.responseText);
            // alert(this.responseText);
          };
        };
        // Send the AJAX request, type is POST
        xmlhttp.open("POST","/ajaxmessage", true);
        // We create AJAX parameters and the data fields
        xmlhttp.setRequestHeader(
          "Content-type",
          "application/x-www-form-urlencoded"
        );
        xmlhttp.send("name=" + name + "&country=" + country + "&message=" + message);
        
      });
    };
  </script>
        <body>
        <div style="margin-left: 20px;">
            <h1>Guestbook project </h1>
                <p>This is simple project<br>for guestbook.</p>
            </div>
            <hr>
        <nav class="navbar navbar-inverse">
        <div class="container-fluid">
            
            <ul class="nav navbar-nav">
            <li class="active"><a href="/">Main page</a></li>
            <li><a href="/guestbook">Guestbook</a></li>
            <li><a href="/newmessage">New message</a></li>
            <li><a href="/ajaxmessage">Ajax message</a></li>
            </ul>
        </div>
        </nav>
        <div style="margin-left: 20px">
        <div class="text-center">
            <h2>This is ajax message page.</h2>
    <div>
    <!-- REMARK - Form method is  = POST or GET -->
    <!-- action - define the URL where POST/GET request will be sent -->
      <form  method="POST" action="/signin">
        <div class="form-group">
          <label for="exampleInputName">Name</label>
          <!-- Remark text field name-attribute -->
          <input
            type="name"
            id="name"
            aria-describedby="nameHelp"
            placeholder="Enter your name"
            name="name" 
          /><br>
        </div>
        <div class="form-group">
          <label for="exampleInputCountry">Country</label>
          <!-- Huomaa tekstikentän name-attribuutti -->
           <input
            type="country"
            id="country"
            placeholder="Enter your country"
            name="country"
          /><br>
        </div>
        <div class="form-group">
            <label for="exampleInputMessage">Message</label>
            <!-- Huomaa tekstikentän name-attribuutti -->
             <input
              type="message"
              class="form-control"
              id="message"
              placeholder="Enter your message"
              name="message"
            />
          </div>
        <!-- Buttonin type = submit, which generates the sending -->
        <button type="button" id="myButton" class="btn btn-primary">
          Submit
        </button>
        <div id="status" class="form-group"></div>
      </form>
    </div>
  
  </body>
</html>